<!DOCTYPE HTML>
<html lang="en">
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Proprietary Headers | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../deprecation/Deprecation.html">
    
    
    <link rel="prev" href="../headers/CommonHeaders.html">
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="16" data-chapter-title="Proprietary Headers" data-filepath="headers/ProprietaryHeaders.md" data-basepath=".." data-revision="Mon Aug 14 2017 14:22:49 GMT+0000 (UTC)" data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="1" data-path="TOC.html">
            
                
                    <a href="../TOC.html">
                
                        <i class="fa fa-check"></i>
                        
                            
                        
                        Table of Contents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i><b>1.</b>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="design-principles/DesignPrinciples.html">
            
                
                    <a href="../design-principles/DesignPrinciples.html">
                
                        <i class="fa fa-check"></i><b>2.</b>
                        
                            
                        
                        Principles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="general-guidelines/GeneralGuidelines.html">
            
                
                    <a href="../general-guidelines/GeneralGuidelines.html">
                
                        <i class="fa fa-check"></i><b>3.</b>
                        
                            
                        
                        General Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="security/Security.html">
            
                
                    <a href="../security/Security.html">
                
                        <i class="fa fa-check"></i><b>4.</b>
                        
                            
                        
                        Security
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="compatibility/Compatibility.html">
            
                
                    <a href="../compatibility/Compatibility.html">
                
                        <i class="fa fa-check"></i><b>5.</b>
                        
                            
                        
                        Compatibility
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="json-guidelines/JsonGuidelines.html">
            
                
                    <a href="../json-guidelines/JsonGuidelines.html">
                
                        <i class="fa fa-check"></i><b>6.</b>
                        
                            
                        
                        JSON Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="naming/Naming.html">
            
                
                    <a href="../naming/Naming.html">
                
                        <i class="fa fa-check"></i><b>7.</b>
                        
                            
                        
                        Naming
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="resources/Resources.html">
            
                
                    <a href="../resources/Resources.html">
                
                        <i class="fa fa-check"></i><b>8.</b>
                        
                            
                        
                        Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="http/Http.html">
            
                
                    <a href="../http/Http.html">
                
                        <i class="fa fa-check"></i><b>9.</b>
                        
                            
                        
                        HTTP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="performance/Performance.html">
            
                
                    <a href="../performance/Performance.html">
                
                        <i class="fa fa-check"></i><b>10.</b>
                        
                            
                        
                        Performance
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="pagination/Pagination.html">
            
                
                    <a href="../pagination/Pagination.html">
                
                        <i class="fa fa-check"></i><b>11.</b>
                        
                            
                        
                        Pagination
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="hyper-media/Hypermedia.html">
            
                
                    <a href="../hyper-media/Hypermedia.html">
                
                        <i class="fa fa-check"></i><b>12.</b>
                        
                            
                        
                        Hypermedia
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="data-formats/DataFormats.html">
            
                
                    <a href="../data-formats/DataFormats.html">
                
                        <i class="fa fa-check"></i><b>13.</b>
                        
                            
                        
                        Data Formats
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="common-data-types/CommonDataTypes.html">
            
                
                    <a href="../common-data-types/CommonDataTypes.html">
                
                        <i class="fa fa-check"></i><b>14.</b>
                        
                            
                        
                        Common Data Types
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="headers/CommonHeaders.html">
            
                
                    <a href="../headers/CommonHeaders.html">
                
                        <i class="fa fa-check"></i><b>15.</b>
                        
                            
                        
                        Common Headers
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="16" data-path="headers/ProprietaryHeaders.html">
            
                
                    <a href="../headers/ProprietaryHeaders.html">
                
                        <i class="fa fa-check"></i><b>16.</b>
                        
                            
                        
                        Proprietary Headers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="deprecation/Deprecation.html">
            
                
                    <a href="../deprecation/Deprecation.html">
                
                        <i class="fa fa-check"></i><b>17.</b>
                        
                            
                        
                        Deprecation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="api-operation/ApiOperation.html">
            
                
                    <a href="../api-operation/ApiOperation.html">
                
                        <i class="fa fa-check"></i><b>18.</b>
                        
                            
                        
                        API Operation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="events/events.html">
            
                
                    <a href="../events/events.html">
                
                        <i class="fa fa-check"></i><b>19.</b>
                        
                            
                        
                        Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="references/References.html">
            
                
                    <a href="../references/References.html">
                
                        <i class="fa fa-check"></i><b>20.</b>
                        
                            
                        
                        References
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="tooling/Tooling.html">
            
                
                    <a href="../tooling/Tooling.html">
                
                        <i class="fa fa-check"></i><b>21.</b>
                        
                            
                        
                        Tooling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="changelog/Changelog.html">
            
                
                    <a href="../changelog/Changelog.html">
                
                        <i class="fa fa-check"></i><b>22.</b>
                        
                            
                        
                        Changelog
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../">Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="proprietary-headers">Proprietary Headers</h1>
<p>This section shares definitions of proprietary headers that should be named consistently because
they address overarching service-related concerns. Whether services support these concerns or not is
optional; therefore, the OpenAPI API specification is the right place to make this explicitly
visible. Use the parameter definitions of the resource HTTP methods.</p>
<h2 id="must-use-only-the-specified-proprietary-zalando-headers"><span style="color:red;font-weight:bold">Must:</span> Use Only the Specified Proprietary Zalando Headers</h2>
<p>As a general rule, proprietary HTTP headers should be avoided.
Still they can be useful in cases where context needs to be passed through multiple services in an end-to-end fashion.
As such, a valid use-case for a proprietary header is providing context information, which is not a part of the actual API, but is needed by subsequent communication.</p>
<p>From a conceptual point of view, the semantics and intent of an operation should always be expressed by URLs path and query parameters, the method, and the content.
Headers are more often used to implement functions close to the protocol considerations, such as flow control, content negotiation, and authentication.
Thus, headers are reserved for general context information (<a href="https://tools.ietf.org/html/rfc7231#section-5" target="_blank">RFC-7231</a>).</p>
<p><code>X-</code> headers were initially reserved for unstandardized parameters, but the usage of <code>X-</code> headers is deprecated (<a href="https://tools.ietf.org/html/rfc6648" target="_blank">RFC-6648</a>).
This complicates the contract definition between consumer and producer of an API following these guidelines, since there is no aligned way of using those headers.
Because of this, the guidelines restrict which <code>X-</code> headers can be used and how they are used.</p>
<p>The Internet Engineering Task Force&apos;s states in <a href="https://tools.ietf.org/html/rfc6648" target="_blank">RFC-6648</a> that company specific header&apos; names should incorporate the organization&apos;s name.
We aim for backward compatibility, and therefore keep the <code>X-</code> prefix.</p>
<p>The following proprietary headers have been specified by this guideline for usage so far.
Remember that HTTP header field names are not case-sensitive.</p>
<table>
<thead>
<tr>
<th>Header field name</th>
<th>Type</th>
<th>Description</th>
<th>Header field value example</th>
</tr>
</thead>
<tbody>
<tr>
<td>X-Flow-ID</td>
<td>String</td>
<td>The flow id of the request, which is written into the logs and passed to called services. Helpful for operational troubleshooting and log analysis. It supports traceability of requests and identifying request flows through system of many services. It should be a string consisting of just printable ASCII characters (i.e. without whitespace). Verify in a received request that it fits to a specific format, has a sensible maximum length and possibly throw out or escape characters/bytes which could crash your log parsing (line breaks, tabs, spaces, NULL). If a legacy subsystem can only work with flow IDs of a specific format, it needs to define this in its API, or make its own ones.</td>
<td>GKY7oDhpSiKY_gAAAABZ_A</td>
</tr>
<tr>
<td>X-UID</td>
<td>String</td>
<td>Generic user id of OpenId account that owns the passed (OAuth2) access token. E.g. additionally provided by OpenIG proxy after access token validation -- may save additional token validation round trips.</td>
<td>w435-dker-jdh357</td>
</tr>
<tr>
<td>X-Tenant-ID</td>
<td>String</td>
<td>The tenant id for future platform multitenancy support. <em>Should not be used unless new platform multitenancy is truly supported. But should be used by New Platform Prototyping services.</em> Must be validated for external retailer, supplier, etc. tenant users via OAuth2; details in clarification. Currently only used by New Platform Prototyping services.</td>
<td>9f8b3ca3-4be5-436c-a847-9cd55460c495</td>
</tr>
<tr>
<td>X-Sales-Channel</td>
<td>String</td>
<td>Sales channels are owned by retailers and represent a specific consumer segment being addressed with a specific product assortment that is offered via CFA retailer catalogs to consumers (see <a href="https://pages.github.bus.zalan.do/core-platform/docs/glossary/glossary.html" target="_blank">platform glossary [internal link]</a>)</td>
<td>101</td>
</tr>
<tr>
<td>X-Frontend-Type</td>
<td>String</td>
<td>Consumer facing applications (CFAs) provide business experience to their customers via different frontend application types, for instance, mobile app or browser. Info should be passed-through as generic aspect -- there are diverse concerns, e.g. pushing mobiles with specific coupons, that make use of it. Current range is mobile-app, browser, facebook-app, chat-app</td>
<td>mobile-app</td>
</tr>
<tr>
<td>X-Device-Type</td>
<td>String</td>
<td>There are also use cases for steering customer experience (incl. features and content) depending on device type. Via this header info should be passed-through as generic aspect. Current range is smartphone, tablet, desktop, other</td>
<td>tablet</td>
</tr>
<tr>
<td>X-Device-OS</td>
<td>String</td>
<td>On top of device type above, we even want to differ between device platform, e.g. smartphone Android vs. iOS. Via this header info should be passed-through as generic aspect. Current range is iOS, Android, Windows, Linux, MacOS</td>
<td>Android</td>
</tr>
<tr>
<td>X-App-Domain</td>
<td>Integer</td>
<td>The app domain (i.e. shop channel context) of the request. Note, app-domain is a legacy concept that will be replaced in new platform by combinations of main CFA concerns like retailer, sales channel, country</td>
<td>16</td>
</tr>
</tbody>
</table>
<p><strong>Exception:</strong> The only exception to this guideline are the conventional hop-by-hop <code>X-RateLimit-</code> headers which can be used as defined in <a href="../http/Http.html#must-use-429-with-headers-for-rate-limits">HTTP/Must-Use-429-with-Headers-For-Rate-Limits</a>.</p>
<h2 id="must-propagate-proprietary-headers"><span style="color:red;font-weight:bold">Must:</span> Propagate Proprietary Headers</h2>
<p>All Zalando&apos;s proprietary headers are end-to-end headers.</p>
<p>All headers specified above must be propagated to the services down the call chain.
The header names and values must remain unchanged.</p>
<p>For example, the values of the custom headers like <code>X-Device-Type</code> can affect the results of queries by using device type information to influence recommendation results.
Besides, the values of the custom headers can influence the results of the queries (e.g. the device type information influences the recommendation results).</p>
<p>Sometimes the value of a proprietary header will be used as part of the entity in a subsequent request.
In such cases, the proprietary headers must still be propagated as headers with the subsequent request, despite the duplication of information.</p>
<p><em>Footnote:</em></p>
<p>HTTP/1.1 standard (<a href="https://tools.ietf.org/html/rfc7230#section-6.1" target="_blank">RFC-7230</a>) defines two types of headers: end-to-end and hop-by-hop headers.
End-to-end headers must be transmitted to the ultimate recipient of a request or response.
Hop-by-hop headers, on the contrary, are meaningful for a single connection only.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../headers/CommonHeaders.html" class="navigation navigation-prev " aria-label="Previous page: Common Headers"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../deprecation/Deprecation.html" class="navigation navigation-next " aria-label="Next page: Deprecation"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"structured-toc":{},"gitbook-restructure-navigation":{"transformations":[{"from":0,"to":1}]},"edit-link":{"base":"https://github.com/zalando/restful-api-guidelines/edit/master","label":"Edit This Page"},"restructure-navigation":{},"anchors":{},"highlight":{},"search":{"maxIndexSize":1000000},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
